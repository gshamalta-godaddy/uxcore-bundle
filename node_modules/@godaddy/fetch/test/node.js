const { describe, it } = require('mocha');
const fetch = require('../node.js');
const {
  assertExportedClasses,
  assertFetchPolyfillIO,
  assertAbortableFetch,
  assertFetchGoDaddyPost
} = require('./utils.js');

const { AbortController, Request, Headers, Response } = fetch;

describe('fetch is available in Node.JS', function () {
  this.timeout(5e3);

  it('exposes default classes', assertExportedClasses(Request, Headers, Response));
  it('can fetch resources', assertFetchPolyfillIO(fetch));
  it('fetch can POST to API', assertFetchGoDaddyPost(fetch));
  it('can abort fetch', assertAbortableFetch(fetch, AbortController));
});
