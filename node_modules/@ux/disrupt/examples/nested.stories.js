/* eslint-disable no-console */
import Disrupt from '../src';
import React from 'react';

// eslint-disable-next-line react/prop-types
function Content({ setOverlay, id }) {
  const onClick = () => {
    setOverlay((ctn) => [<Content setOverlay={ setOverlay } id={ id + 1 } key={ id + 1 } />, ...ctn]);
  };

  return (
    <Disrupt onClose={ () => setOverlay((ctn) => ctn.filter((_, i) => i !== 0)) } portalElem={ document.body } focusLock>
      <section className='content'>
        Very important message { id }, create another nested overlay with this button:
        <button onClick={ onClick } id={ `show-overlay-${id}` }>Show another</button>
      </section>
    </Disrupt>
  );
}

export default function Nested() {
  const [overlay, setOverlay] = React.useState([]);
  const onClick = () => {
    setOverlay(() => [<Content setOverlay={ setOverlay } id={ 1 } key={ 1 } />]);
  };

  return (
    <div>
      <aside>
        Mustache fingerstache stumptown, listicle messenger bag schlitz chillwave.
        Ramps lyft truffaut cronut aesthetic chillwave.
        Enamel pin man braid gentrify snackwave post-ironic tattooed selfies, single-origin coffee hella waistcoat forage.
        Crucifix listicle flexitarian, prism direct trade gluten-free kombucha cray man braid shabby chic palo santo.
      </aside>
      <button onClick={ onClick } id='show-overlay'>Down the rabbit hole</button>
      { overlay }
    </div>
  );
}
