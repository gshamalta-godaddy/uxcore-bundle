# Dropdown Component

UXCore2 Dropdown component. Dropdowns are toggleable, contextual overlays for
displaying lists of links and more. They're toggled by clicking, not by
hovering to support touch devices.

### Installation

```bash
npm install --save @ux/dropdown
```
#### To develop locally for this module use `@storybook/react` and `@exemplar/storybook-react`:
```
npm run storybook
```

### Usage

The Component has multiple features. It can be rendered as select, multiselect
or button dropdown. The simple example below shows how to create a button
dropdown.

```js
import Dropdown, { DropdownControl, DropdownItem } from '@ux/dropdown';
import React, { Component } from 'react';

export default class Example extends Component {
  render () {
    return (
      <Dropdown>
        <DropdownControl>
          List of links
        </DropdownControl>

        <DropdownItem href="https://example.com">
          Example.com
        </DropdownItem>
        <DropdownItem href="https://other.com">
          Other.com
        </DropdownItem>
      </Dropdown>
    );
  }
}
```

#### Dropdown menu

The order of elements is determined from the order of children passed to
`Dropdown`. `DropdownItem` will be rendered as anchor element. All properties
are passed to the anchor as attributes. Allowing the anchor to function as a
normal HTML anchor or enhanced React component with `onClick` handlers or
similar. Both the `DropdownDivider` and `DropdownHeader` will be rendered in
the menu as is. The components can be used to create visual separation or to
highlight items.

```js
<Dropdown>
  <DropdownHeader>Important link</DropdownHeader>
  <DropdownItem href="https://example.com">
    Example.com
  </DropdownItem>
  <DropdownDivider/>
  <DropdownItem href="https://other.com">
    Other.com
  </DropdownItem>
</Dropdown>
```

#### Labels

Much like the UXCore2 `form-element`, `Dropdown` supports custom labels. The
`label` attribute is of type `PropTypes.node`, meaning one can pass in an
element to customize the look and functionality of the `Dropdown`.

```js
import React, { Component } from 'react';
import { Dropdown, Tooltip } from '@ux/uxcore2';

const { DropdownItem } = Dropdown;

export default class App extends Component {
  render() {
    const label = (
      <span style={{ fontWeight: 'bold' }}>
        <Tooltip title='A tooltip' message='Well hello there'>A label</Tooltip>
      </span>
    );

    return (
      <Dropdown label={label} type='select' name='myDropdown'>
        <DropdownItem>Banana</DropdownItem>
        <DropdownItem>Apple</DropdownItem>
        <DropdownItem>Peach</DropdownItem>
        <DropdownItem>Orange</DropdownItem>
      </Dropdown>
    );
  }
}
```

#### Validation of content

Child components will be validated through `propTypes`. The Dropdown can only
have children of type: `DropdownControl`, `DropdownItem`, `DropdownDivider` or
`DropdownHeader`. This ensures HTML structure is correct and that a working
Dropdown component is rendered.

#### Button dropdown

The default [usage][#usage] example shows how to create a regular dropdown. To
render the button dropdown in split mode, provide the `split` property to the
`DropdownControl`. This will change the toggle dropdown behavior from the
button to a separate chevron.

```js
  <DropdownControl split>
    List of links
  </DropdownControl>
```

#### Select dropdown

Three distinct modes are available for the select dropdown, which can be
switched through the `type` property.

Setting `type="tripledot"` uses a triple-dot svg as the `DropdownControl`. Its
common use case is as an overflow dropdown menu that holds extra actions that
aren't explicitly shown in the UI.

To use the multiselect dropdown simply use `type="multiselect"`.

```js
import Dropdown, { DropdownControl, DropdownItem } from '@ux/dropdown';
import React, { Component } from 'react';

export default class Example extends Component {
  myChangeHandler(props, event) {
    // add custom logic
  }

  handleToggle(open) {
    // example
    this.isOpen = open;
  }

  render () {
    return (
      <Dropdown type="select" open={this.isOpen} onChange={this.myChangeHandler} onToggle={this.handleToggle}>
        <DropdownItem value="nyc">New York</DropdownItem>
        <DropdownItem value="sfo">San Francisco</DropdownItem>
      </Dropdown>
    );
  }
}
```

The menu for the `Tripledot` dropdown will likely be wider than the control
itself. By default the right edge of the menu aligns with the right edge of
the control. If the content of the menu overflows the page then that alignment
automatically switches to the left.

```js
<Dropdown type="tripledot">
  <DropdownItem>This is exceptionally long text that causes the menu to flow left instead of right.</DropdownItem>
  <DropdownItem>Update</DropdownItem>
  <DropdownItem>Delete</DropdownItem>
</Dropdown>
```

An `onChange` listener will receive `props` and a click `event` whenever
`DropdownItem`s are clicked. The listener provides no external control to the
Dropdown. It's merely a receiver of:

- props: name, value, caption and selected index of the `DropdownItem`.
- event: DOM click event.

An `onToggle` listener will receive the `open` state of a Dropdown when the
Dropdown itself is clicked - NOT the `DropdownItem`.

The `open` property will determine whether the Dropdown will initially render
as open or closed. Default is false.

#### DropdownControl

The `DropdownControl` is optional for the select dropdown. If omitted the
control will be generated from the selected `DropdownItem`.

If no item is selected, the `placeholder` property on `Dropdown` can specify
placeholder text to display.

```js
<Dropdown placeholder="Custom placeholder text">
  ...
</Dropdown>
```

Note: `POST` requests should receive the value(s) of the select dropdown. The
component keeps track of the selected value(s) through a hidden input or
checkboxes.

## Test

Make sure dependencies are installed and that you're running on `node@8` or above.

```bash
npm test
```
