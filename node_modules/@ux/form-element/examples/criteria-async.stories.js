import { FormElement, Criteria } from '@ux/uxcore2';
import React from 'react';

export default class CriteriaAsyncExample extends React.Component {
  get asyncValidation() {
    return value => {
      return new Promise(
        (resolve, reject) => {
          setTimeout(() => {
            if (value === 'ABC') {
              resolve(true);
            } else {
              reject(new Error("Was not 'ABC'"));
            }
          }, 500);
        }
      );
    };
  }

  render() {
    return (
      <Criteria.Connect>
        <FormElement label='Async Example' name='asyncExample' placeholder="Type 'ABC'"/>
        <Criteria>
          <Criteria.Header>Your input must</Criteria.Header>
          <Criteria.Rule validate={ this.asyncValidation }>
            be the word <strong>ABC</strong>
          </Criteria.Rule>
        </Criteria>
      </Criteria.Connect>
    );
  }
}
