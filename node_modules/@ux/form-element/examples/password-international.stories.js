import { IntlProvider, FormattedMessage } from 'react-intl';
import { Form, Password, Button } from '@ux/uxcore2';
import messages from './messages';
import React from 'react';

export default class PasswordIntl extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      locale: 'en'
    };

  }

  get switch() {
    return event => {
      event.preventDefault();

      this.setState({
        locale: this.state.locale === 'en' ? 'fr' : 'en'
      });
    };
  }

  get messages() {
    return messages.filter(lib => lib.locale === this.state.locale)[0].messages;
  }

  render() {
    return (
      <IntlProvider locale={ this.state.locale } messages={ this.messages }>
        <Form>
          <Password
            id='intl'
            label={ <FormattedMessage id='password' /> }
            show={ <FormattedMessage id='show' /> }
            hide={ <FormattedMessage id='hide' /> } />

          <Button design='primary' id='switch-language' onClick={ this.switch }>
            <FormattedMessage id='switch' />
          </Button>
        </Form>
      </IntlProvider>
    );
  }
}
