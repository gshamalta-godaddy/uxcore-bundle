import React from 'react';
import PropTypes from 'prop-types';
import Rule from '../criteria-rule';
import { detach } from '../util';

/**
 * Rule component requiring a minimum and maximum length of characters.
 *
 * @displayName MinMaxCharactersRule
 *
 * @param {Object} props Props
 * @returns {ReactElement} ReactElement
 */
export default function MinMaxCharactersRule(props) {
  var [a, b] = detach(props, 'min', 'max');
  return (
    <Rule validate={ (v) => v.length >= a.min && v.length <= a.max } { ...b }>
      { props.children }
    </Rule>
  );
}

/**
 * PropType validation.
 *
 * @type {Object}
 * @private
 */
MinMaxCharactersRule.propTypes = {
  /** The minimum number of characters (inclusive) */
  min: PropTypes.number.isRequired,
  /** The maximum number of characters (inclusive) */
  max: PropTypes.number.isRequired,
  /** Child elements */
  children: PropTypes.node
};
