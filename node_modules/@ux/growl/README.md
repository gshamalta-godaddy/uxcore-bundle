# `@ux/growl`

Component for displaying passive notifications. This component is not bundled in `@ux/uxcore2` so you must install & bundle it yourself.

### Installation

```bash
npm install --save @ux/growl
```

> To develop locally for this module use `@storybook/react` and `@exemplar/storybook-react`:
> ```
> npm run storybook
> ```

## Usage

A Growl component should be instantiated in a top level component of the react app. Only one Growl instance can be active.

```jsx
import React from 'react';
import Growl from '@ux/growl'

function MySimpleApp(props) {
  return (
      <div id="MyApp">
        <AppHeader />
        <Growl />
        {this.props.children}
      </div>
    );
}
```

After that, messages can be added to the Growl instance using `addGrowlMessage`.

```jsx
import React from 'react';
import text from '@ux/text';
import Growl from '@ux/growl';

const msgConfig = {
  id: 'my-example-message',
  title: <text.h3 text='My growl message' as='title'/>,
  children: 'This message was added with addGrowlMessage',
  emphasis: 'success',
  lifetime: 2500
}

function MyChildComponent(props) {
  return (
    <div>
      <h1>My Page Title</h1>
      <button onClick={ () => Growl.addGrowlMessage(msgConfig) }>Add Message</button>
    </div>
  );
}
```

## Props

The `<Growl/>` component only allows for the `closeLabel` prop, which is a string
that describes the content for the close all button which appears above the messages.

### `addGrowlMessage`

The function takes a configuration object which expects props for each message.
The following props are inherited from the `@ux/dialog` component.

| Prop | Type | Description |
| ---- | ---- | ----------- |
| `actions` | `Elements` | The actions that a user can take after reading the contents of the notification. These are expected to be `@ux/button` components. |
| `ariaLabels` | `Object` | A configuration object of aria-labels to be added within the component. The `close` value is added to the close button. |
| `children` | `Node` | Adds children to the content container. |
| `emphasis` | `String` | Determines the status of the component. |
| `id` | `String` | Provides an accessibility relationship between the `title` and the component. |
| `title` | `String` | The title for the notification. This is expected to be a `@ux/text` component. |

All messages in the growl are set `as='growl'` and have an internal `onClose` method assigned.

Unique to the growl, you can include the `lifetime` prop in the `addGrowlMessage` configuration to set the lifetime of the message.
If you do not include the `lifetime` prop, the message will persist until the user closes it.

### Breaking changes for 2200
- Component is now functional and `addGrowlMessage` inherits all props from `@ux/dialog`.
- Related to previous point, the `title` and `id` props for `addGrowlMessage` are now expected for accessibility.
- The `title` prop expects a `@ux/text` component but can accept a string for backward compatibility.
- The `fade` prop is now inert. If you want the component to disappear after an amount of time, set the `fadeTime` to a number. 
Otherwise the message will persist until the user closes it.
- All messages are able to be closed by the user using the provided close button with the message.
- `content` for `addGrowlMessage` is an alias for `children` with typical React pattern behavior.
- `fadeTime` for `addGrowlMessage` is an alias for `lifetime`.
- `icon` for `addGrowlMessage` is an alias for `emphasis`, expecting the feedback types.
- `id` while required for `addGrowlMessage` is randomly generated when not provided.