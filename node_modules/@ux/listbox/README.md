# @ux/listbox

Creates a list of options for a user to choose.
## Installation

```bash
npm i @ux/listbox
```
## Usage

The `items` prop is a required array of values for the list.

```jsx
import React from 'react';
import Listbox from '../src';

const items = [{
  id: 'add',
  children: 'Add a thing'
}, {
  id: 'edit',
  children: 'Edit a thing'
}, {
  id: 'delete',
  children: 'Delete from existence'
}];

export default function MyList() {
  return (
    <Listbox items={ items }/>
  );
}
```

### `onActiveItemChange` and `onConfirm`

The component provides two callbacks. `onActiveItemChange` will fire as the user changes the visual focus within the list (eg. using arrow keys to navigate between items). `onConfirm` will fire once the user confirms the selection (eg. using the Enter key to make the selection). In cases where the user is traversing with a mouse, `onActiveItemChange` and `onConfirm` will fire together as the visually focused element will also be the selected one.

For both of these functions, the callback has the signature of `callback(idOfItem, MetaObjectIncludingOriginalEvent)`. The reason why we do not use a value is because the listbox is expected to be used in functional selection. This is when the user selects an option and it is executed immediately. This is similar to adding an event listener on each individual item in the list.

```jsx
import React from 'react';
import Listbox from '../src';
import api from 'my-application/api';

const items = [{
  id: 'add',
  children: 'Add a thing'
}, {
  id: 'edit',
  children: 'Edit a thing'
}, {
  id: 'delete',
  children: 'Delete from existence'
}];

export default function MyAPIList() {

  const onConfirm = (id) => {
    switch(id) {
      case 'add':
        api.addItem();
        break;
      case 'edit':
        api.editItem();
        break;
      case 'delete':
        api.deleteItem();
        break;
      default:
        break;
    }
  }

  return (
    <Listbox items={ items } onConfirm={ onConfirm } />
  );
}
```

### `anchorRef`

In some listbox configurations, another element may communicate with the listbox in order to satisfy accessibility requirements. To support this, use the `anchorRef` prop and assign a ref that represents an element which will include the following behavior:

- Remains focused in the DOM as the listbox is navigated using arrow keys.
- Includes the `aria-activedescendant` attribute using the `id` of visually focused item in the listbox.
- Listens for and forward additional events to the listbox to allow for expected functionality.

> **Warning**
> Once you apply a ref to the `anchorRef` prop, the listbox will control all of the above behaviors on that ref. Please do not attempt to recreate or control any of the items listed above when using this prop.

## Props

| Prop | Type | Description |
| ---- | ---- | ----------- |
| `as` | `['listbox', 'menu']` | Determines how the component should exist semantically for accessibility purposes. Default is `listbox`. |
| `anchorRef` | `React.ref` | Connects the component to another element, see [`anchorRef`](#anchorRef). |
| `items` | `Array<Object>`  | Required: the list of items to choose from, expects `children` and unique `id` keys. |
| `loop` | `Boolean` | Allows the visual focus to loop around the items when navigating with arrow keys. |
| `onActiveItemChange` | `Function` | Callback that fires when the visual focus changes, see [`onActiveItemChange` and `onConfirm`](#onActiveItemChange-and-onConfirm). |
| `onConfirm` | `Function` | Callback that fires on selection, see [`onActiveItemChange` and `onConfirm`](#onActiveItemChange-and-onConfirm). |
| `selected` | `String` | The `id` of the item currently chosen, used for when the component is used for controlled behavior. |
| `stretch` | `Boolean` | Stretches the list as full width. |
| `tabIndex` | `Number` | Can be set as either `0` or `-1` for the list. |

## Test


```bash
npm test
```
