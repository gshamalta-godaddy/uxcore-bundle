import Search from '../src';
import Button from '@ux/button';
import Spinner from '@ux/spinner';
import React from 'react';

const results = [
  'cantaloupe',
  'carambola',
  'cherimoya',
  'cherries',
  'clementine',
  'coconut meat',
  'cranberries',
  'custard-apple'
];

export default function Loading(args) {
  const [value, setValue] = React.useState('');
  const [items, setItems] = React.useState([]);
  const button = <Button text='See result in console' design='primary' onClick={ () => console.log(value) }/>;

  React.useEffect(() => {
    setItems([]);
    const t = setTimeout(() => {
      setItems(results.filter((result) => result.startsWith(value) && result !== value));
    }, 2000);
    return () => clearTimeout(t);
  }, [value]);

  return (
    <form role='search' action=''>
      <Search
        button={ button }
        value={ value }
        onChange={ setValue }
        open={ Boolean(value) }
        items={ items }
        { ...args }>
          <div style={{ padding: '1rem', textAlign: 'center' }}>
            <Spinner/>
          </div>
        </Search>
    </form>
  );
}

Loading.args = {
  id: 'my-search',
  strategy: 'absolute',
  placeholder: 'Enter a keyword starting with "c" here'
};
