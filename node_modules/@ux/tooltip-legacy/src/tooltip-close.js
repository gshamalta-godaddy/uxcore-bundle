import PropTypes from 'prop-types';
import React, { useEffect } from 'react';
import Button from '@ux/button';
import Close from '@ux/icon/x';

/**
 * Render the close button of the tooltip.
 *
 * @param {Object} props Component properties.
 * @returns {ReactElement} button
 * @private
 */
export default function TooltipClose({ close, className, ariaLabels }) {
  let activeElement;

  useEffect(() => {
    activeElement = document && document.activeElement;

    const button = document.querySelector(`.${className}`);
    if (button) button.focus();

    return (() => {
      if (activeElement) activeElement.focus();
    });
  });

  return (
    <Button
      aria-label={ ariaLabels.close }
      type='button'
      className={ className }
      onClick={ close }
      design={ 'stateless' }
      icon={ <Close /> }
    />
  );
}

TooltipClose.defaultProps = {
  ariaLabels: ({
    close: 'Close Tooltip'
  })
};

/**
 * Property types definition.
 *
 * @enum {Object} propTypes
 * @private
 */
TooltipClose.propTypes = {
  close: PropTypes.func.isRequired,
  className: PropTypes.string,
  ariaLabels: PropTypes.shape({
    close: PropTypes.string
  })
};
