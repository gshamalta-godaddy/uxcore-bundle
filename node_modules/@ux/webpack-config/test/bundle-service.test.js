const { create } = require('../bundle-service');
const { describe, it } = require('mocha');
const assume = require('assume');
const path = require('path');

describe('Bundle Service Configuration', function () {
  it('is exported as function', function () {
    assume(create).is.a('function');
  });

  it('configures the entry point', function () {
    const config = create('Example');

    assume(config).is.a('object');
    assume(config.entry).is.a('string');
    assume(config.entry).equals('./src/index.js');
  });

  it('consumes the externals', function () {
    const config = create('Lmao');

    assume(config.externals).exists();
    assume(config.externals).deep.equals(require('../index.js').externals);
  });

  it('configures the library output', function () {
    const config = create('Another', { root: __dirname });

    assume(config.output).is.a('object');
    assume(config.output.library).deep.equals(['ux', 'Another']);
    assume(config.output.libraryTarget).equals('umd');
    assume(config.output.filename).equals('bundle-service.js');
    assume(config.output.path).equals(path.join(__dirname, 'dist'));
  });
});
